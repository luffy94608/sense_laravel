!function(t){t.log=function(t){console.log(t)},t.locationUrl=function(t,e){e?window.location.replace(t):window.location.href=t},t.fn.wclick=function(e){t(this).click(function(t){!1===e.call(this,t)&&t.preventDefault()})},t.toastSuccess=function(e){var n=t("#js_toast_success");return"hide"==e?void n.hide():void n.show()},t.loadingToast=function(e){var n=t("#js_loading_toast");return"hide"==e?void n.hide():void n.show()},t.showToast=function(e,n,a){var i={toastID:"toast-new",dur:2e3};if("string"!=typeof e)throw"Invalid param of $.showToast";if(0==t("#"+i.toastID).length){var o='<section id="'+i.toastID+'" class="gone">                <div class="toast-box">                </div>            </section>';t("body").append(o)}var u=t("#"+i.toastID),s=u.find(".toast-box"),l=function(){s.empty().append("<p>")},r=function(){var e=t(window).height(),n=e/2-30;u.css("top",n+"px")},d=function(e){u.show(300),setTimeout(function(){u.hide(300),t.isFunction(a)&&setTimeout(a,300)},e)},c=function(){"boolean"==typeof n&&(n?s.find("p").addClass("yea"):s.find("p").addClass("nay"))};l(),c(),s.find("p").append(e),r(),d(i.dur)},t.confirm=function(e){var n={title:"提示",content:"内容",cancelTitle:"取消",confirmTitle:"确定",textCenter:!1,hideCancelBtn:!1,hideSubmitBtn:!1,success:function(){},cancel:function(){}};t.extend(n,e);var a=t("#js_dialog_confirm"),i=a.find(".js_cancel"),o=a.find(".js_submit");n.textCenter?a.removeClass("weui_dialog_confirm").addClass("weui_dialog_alert"):a.removeClass("weui_dialog_alert").addClass("weui_dialog_confirm"),n.hideCancelBtn?i.hide():i.show(),n.hideSubmitBtn?o.hide():o.show(),a.find(".js_title").html(n.title),a.find(".js_content").html(n.content),i.html(n.cancelTitle),o.html(n.confirmTitle),o.unbind().wclick(function(){t.isFunction(n.success)&&n.success(),a.hide()}),i.unbind().wclick(function(){t.isFunction(n.cancel)&&n.cancel(),a.hide()}),a.show()},t.wpost=function(e,n,a,i,o){t("body");null==n&&(n={}),n.request_type="ajax",o||t.loadingToast(),e+="?XDEBUG_SESSION_START=19192",t.log(">>>>>>>>>>>>>"+e+">>>>>>>>>>>>>>>"),t.ajax({type:"post",url:e,data:n,success:function(e){if(t.log("==========="),t.log(e),o||t.loadingToast("hide"),0==e.code)t.isFunction(a)&&a(e.data);else{if(-1==parseInt(e.code))return t.showToast(e.msg,!1),void(t.isFunction(i)&&i(e));t.isFunction(i)?i(e):t.showToast(e.msg,!1)}},error:function(e,n,a){if(n){n+"<br>status:"+e.status+" "+e.statusText+"<br>";t.showToast("服务器错误",!1)}else t.showToast(a.description,!1);t.isFunction(i)&&i(res),o||t.loadingToast("hide")},dataType:"json"})},t.fn.uploadImage=function(e,n,a){t(this).next('input[type="file"]').remove();var i=t(' <input style="display:none;" type="file" name="file"/>'),o=t(this);i.change(function(){if(/image/i.test(this.files[0].type)){var i=new XMLHttpRequest;o.data("_sid","_sid_"+Math.random());var u=o.position();t("div></div>").css({postion:"absolute",top:u.top,left:u.left,opacity:"0.5","background-color":"#CCC","-webkit-border-radius":"5px",padding:"5px","z-index":o.zIndex+1}).attr("id",o.data("_sid"));i.upload.onprogress=function(e){var n=e.loaded/e.total;t("#"+o.data("_sid")).html(100*n+"%")},i.onload=function(){200==this.status&&a&&a(t.parseJSON(this.responseText).data),t("#"+o.data("_sid")).remove()},i.open("POST",e,!0);var s=new FormData;if(s.append("image",this.files[0]),n)for(var l in n)s.append(l,n[l]);i.send(s)}else alert("请选择图片"),t(this).click()}),t(this).after(i),i.click()},Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t},t.fn.Pager=function(e){var n={url:null,currentPage:0,protocol:null,listSize:20,onPageInitialized:null,onCountChanged:null,wrapUpdateData:null},a=t(this);return t.extend(n,e),a.currentIdx=function(){return n.currentPage},a.initTabPage=function(){var e=a.find("#list_count").html(),i=parseInt((parseInt(e)+n.listSize-1)/n.listSize),o=a.find("#pager_indicator").PagerIndicator({url:n.url?n.url:null,currentPage:n.currentPage,totalCount:e,totalPage:i,pageSize:5,onPageChange:function(t){n.currentPage=t,a.updateList(t),o.invalidate()}});t.isFunction(n.onPageInitialized)&&n.onPageInitialized(a)},a.setEmpty=function(t){a.find("#list").empty().html(t)},a.updateList=function(e){var i={offset:e*n.listSize,length:n.listSize};t.isFunction(n.wrapUpdateData)&&(i=n.wrapUpdateData(e,i)),t.wpost(n.protocol,i,function(i){a.find("#list_count").html(i.total),a.find("#list").html(i.html),t.isFunction(n.onCountChanged)&&n.onCountChanged(i.total),a.initTabPage(e)})},a.initTabPage(),a},t.fn.PagerIndicator=function(e){var n={url:null,totalCount:0,totalPage:1,currentPage:0,pageSize:3,updateWhenInit:!1,showLast:!0,onPageChange:null},a=t(this),i="",o="",u="active",s=t("<li class='paginate_button'><a href='javascript:void(0);'></a></li>"),l=t("<li class='paginate_button' style='padding:0px 5px 0px 0px;'></li>"),r="首页",d="末页",c="上一页",F="下一页";e!=n&&t.extend(n,e),n.totalPage=Math.max(1,n.totalPage),n.currentPage=Math.min(Math.max(n.currentPage,0),n.totalPage-1),n.url&&(n.url.indexOf("?")>0?n.url=n.url+"&":n.url=n.url+"?");var h=(1&n.pageSize?0:1,n.pageSize-1>>1),f=Math.max(0,Math.min(n.currentPage+h,n.totalPage-1)-n.pageSize+1),p=Math.min(n.totalPage-1,Math.max(n.currentPage-h,0)+n.pageSize-1),g=0==n.currentPage,m=n.currentPage==n.totalPage-1,C=Math.max(n.currentPage-1,0),v=Math.min(n.currentPage+1,n.totalPage-1),x=[{html:r,title:r,disabled:g,desIdx:0,style:g?i:o}];x.push({html:c,title:c,disabled:g,desIdx:C,style:g?i:o});for(var P=f;p>=P;P++){var D=P==n.currentPage,_=D?u:o;x.push({html:P+1,title:P+1,style:_,disabled:D,desIdx:P,isNum:!0})}if(x.push({html:F,title:F,disabled:m,desIdx:v,style:m?i:o}),n.showLast&&x.push({html:d,title:d,disabled:m,desIdx:n.totalPage-1,style:m?i:o}),a.empty(),n.totalCount>0){var y=t('<li class="paginate_button"><div class="page_info"></div></li>').find(".page_info").html('总数<span class="number">'+n.totalCount+'</span>,共<span class="number">'+n.totalPage+"</span>页");n.totalPage>1&&(y.append('<input type="text" placeholder="GO" class="input_go">'),y.find("input").keypress(function(e){if(13==e.keyCode){var a=parseInt(t(this).val(),10);n.url?location.href=n.url+"page="+a:a>0&&a<=n.totalPage&&t.isFunction(n.onPageChange)&&n.onPageChange(a-1)}})),y.parent().appendTo(a)}return n.totalPage>1&&t.each(x,function(e,i){if(i.disabled&&!i.isNum,1)if(n.currentPage==i.desIdx){var o=s.clone().appendTo(a);o.addClass(i.style),o.find("a").html(i.html).addClass(i.style)}else null==n.url?s.clone().appendTo(a).find("a").html(i.html).attr("title",i.title).addClass(i.style).wclick(function(){return n.currentPage=i.desIdx,t.isFunction(n.onPageChange)&&n.onPageChange(i.desIdx),!1}):s.clone().appendTo(a).find("a").html(i.html).attr("title",i.title).addClass(i.style).attr("href",n.url+"page="+(i.desIdx+1)).attr("target","_top");else l.clone().appendTo(a).html(i.html).attr("title",i.title).addClass(i.style)}),a.invalidate=function(){a.PagerIndicator(n)},n.updateWhenInit&&t.isFunction(n.onPageChange)&&n.onPageChange(n.currentPage),a.currentPage=function(){return n.currentPage},a},t.getByteLength=function(t){if(!t)return 0;return t.length},t.hintFormatter={empty:"{0}为必填项",tooShort:"{0}至少{1}个字",tooLong:"{0}最多{1}个字",bad:"{0}格式不对"},t.defaultVerifyConfig={name:{min:4,max:16,banSpecial:!0,title:"真实姓名",hasSpecial:function(t){var e=/^[\u4E00-\u9FA5a-zA-Z\s]+$/;if(e.test(t)){var n=/^（）[！？。，《》{}【】“”·、：；‘’……]+$/;return n.test(t)}return!0},test:function(t){return!0}},password:{min:6,max:60,title:"登录密码",test:function(t){return!0}},email:{min:-1,max:-1,title:"邮箱",test:function(t){var e=/^[a-z0-9]+([._-]*[a-z0-9]+)*@([a-z0-9\-_]+([.\_\-][a-z0-9]+))+$/i;return e.test(t)}},url:{min:-1,max:-1,title:"URL",test:function(t){var e=/^(https?:\/\/)?(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;return e.test(t)}},qq:{min:5,max:15,title:"QQ",test:function(t){var e=/^[1-9][0-9]{4,}$/i;return e.test(t)}},mobile:{min:-1,max:-1,title:"手机号",test:function(t){var e=/^(\+|00)?[0-9\s\-]{3,20}$/;return e.test(t)}},job_id:{min:1,max:50,title:"员工号码",test:function(t){return!0}},desc:{min:10,max:200,title:"需求描述",test:function(t){return!0}},remark:{min:10,max:200,title:"评价内容",test:function(t){return!0}}},t.checkInputVal=function(e){var n={val:null,onChecked:function(t,e,n){},type:null,showHint:!1,required:!0};n=t.extend(n,e),n.onChecked=t.isFunction(n.onChecked)?n.onChecked:function(t,e,n){};var a=function(e,n){return 0==e?t.hintFormatter.empty.format(n.title):-1==e?t.hintFormatter.tooShort.format(n.title,parseInt(n.min)):-2==e?t.hintFormatter.tooLong.format(n.title,parseInt(n.max)):-3==e?t.hintFormatter.bad.format(n.title):""},i=n.val,i=t.trim(i),o=t.defaultVerifyConfig[n.type];if(!i||0==i.length)return n.onChecked(i,0,a(0,o)),0;var u=t.getByteLength(i);if(o.min>0&&u<o.min)return n.onChecked(i,-1,a(-1,o)),-1;if(o.max>0&&u>o.max)return n.onChecked(i,-2,a(-2,o)),-2;if(o.banSpecial)if(t.isFunction(o.hasSpecial)){if(o.hasSpecial(i))return n.onChecked(i,-4,"不能包含特殊字符"),-4}else{var s=/^[\u4E00-\u9FA5a-zA-Z0-9\s\.\,\(\)\+#\-]+$/;if(!s.test(i))return n.onChecked(i,-4,"不能包含特殊字符"),-4;var l=/^[（）！？。，《》{}【】“”·、：；‘’……]+$/;if(l.test(i))return n.onChecked(i,-4,"不能包含特殊字符"),-4}return o.test(i)?(n.onChecked(i,1,""),1):(n.onChecked(i,-3,a(-3,o)),-3)}}(jQuery);